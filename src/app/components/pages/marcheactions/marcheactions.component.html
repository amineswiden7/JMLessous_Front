<app-header></app-header>
<app-breadcrumb></app-breadcrumb>

<!-- Détails action -->
<ng-template #content let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title" style="color: #27346a">{{actionMarket.referentiel.stockName}}</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
  </div>
  <div class="modal-body">
    <div class="container">
      <div class="row">
        <div class="col" style="color: #454d55; font-family: 'Arial Black'">Veille</div>
        <div class="col" style="color: #27346a; font-weight: bold">{{actionMarket.last}}</div>
        <div class="col" style="color: #454d55; font-family: 'Arial Black'">Variation</div>
        <div class="col" style="color: #27346a; font-weight: bold">{{actionMarket.change}}</div>
      </div>
      <div class="row">
        <div class="col" style="color: #454d55; font-family: 'Arial Black'">Qté. Ech</div>
        <div class="col" style="color: #27346a; font-weight: bold">{{actionMarket.volume}}</div>
        <div class="col" style="color: #454d55; font-family: 'Arial Black'">Cap. Ech</div>
        <div class="col" style="color: #27346a; font-weight: bold">{{actionMarket.caps}}</div>
      </div>
      <div class="row">
        <div class="col" style="color: #454d55; font-family: 'Arial Black'">Plus haut</div>
        <div class="col" style="color: #27346a; font-weight: bold">{{actionMarket.high}}</div>
        <div class="col" style="color: #454d55; font-family: 'Arial Black'">Plus bas</div>
        <div class="col" style="color: #27346a; font-weight: bold">{{actionMarket.low}}</div>
      </div>
      <div class="row">
        <div class="col" style="color: #454d55; font-family: 'Arial Black'">Seuil haut</div>
        <div class="col" style="color: #27346a; font-weight: bold">{{actionMarket.max}}</div>
        <div class="col" style="color: #454d55; font-family: 'Arial Black'">Seuil bas</div>
        <div class="col" style="color: #27346a; font-weight: bold">{{actionMarket.min}}</div>
      </div>
    </div>
    <hr>
    <div class="container">
      <mat-tab-group mat-stretch-tabs class="example-stretched-tabs mat-elevation-z4">
        <mat-tab label="Ordres">
          <div style="font-size: 18px; font-weight: bolder; color: #454d55" >Tableau d'ordres</div>
          <div class="content">
            <table class="table table-striped table-active">
              <thead>
              <tr>
                <th scope="col">Heure</th>
                <th scope="col">Ord A</th>
                <th scope="col">Qté A</th>
                <th scope="col">Achat</th>
                <th scope="col">Vente</th>
                <th scope="col">Qté V</th>
                <th scope="col">Ord V</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let limit of limits">
                <th scope="row">{{limit.time}}</th>
                <td>{{limit.askOrd}}</td>
                <td>{{limit.askQty}}</td>
                <td>{{limit.ask}}</td>
                <td>{{limit.bid}}</td>
                <td>{{limit.bidQty}}</td>
                <td>{{limit.bidOrd}}</td>
              </tr>
              </tbody>
            </table>
          </div>
        </mat-tab>
        <mat-tab label="Échanges">
          <div style="font-size: 18px; font-weight: bolder; color: #454d55" >Les transactions du jour</div>
          <div class="content">
            <table class="table table-striped table-active">
              <thead>
              <tr>
                <th scope="col">Heure</th>
                <th scope="col">Quantité</th>
                <th scope="col">Coût</th>
                <th scope="col">Volume</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let intraday of intradays">
                <th scope="row">{{intraday.time}}</th>
                <td>{{intraday.volume}}</td>
                <td>{{intraday.last}}</td>
                <td>{{intraday.caps}}</td>
              </tr>
              </tbody>
            </table>
          </div>
        </mat-tab>
      </mat-tab-group>

    </div>

    <div class="container">
      <table>
        <thead>
          <tr>
            <th scope="col" style="color: #454d55; font-family: 'Arial Black'">Date Publication</th>
            <th scope="col" style="color: #454d55; font-family: 'Arial Black'">Actualité</th>

          </tr>
          </thead>
          <tbody>
        <tr *ngFor="let actu of actualites">
          <td style="color: #27346a; font-weight: bold">{{actu[0]}}</td>
          <td style="color: #27346a; font-weight: bold"><a href="https://www.ilboursa.com/marches{{actu[1]}}" target="_blank"> {{actu[2]}}</a></td>
        </tr>

      </table>
    </div>
    <hr>
    <div class="container">

    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="d('Save click')">Fermer</button>
  </div>
</ng-template>
<!-- End Détails action -->
<div class="container-fluid py-4">
  <div class="row">
    <div class="col-12">
      <div class="card mb-4">
        <br>
        <span class="text-secondary text-lg-start font-weight-bold">
          {{ date | date:'full':'fr' }}, le marché est {{ouvert}}
        </span>
        <div class="card-header pb-0">
          <h6>Les cotations de A à Z</h6>
        </div>
        <div class="card-body px-0 pt-0 pb-2">
          <div class="table-responsive p-0">
            <table class="table align-items-center mb-0">
  <thead>
  <tr class="lw-table-row-1">
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Valeur</th>
    <!--<th scope="col">Statut</th>
    <th scope="col">Ord Achat</th>-->
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Qté Achat</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Achat</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Vente</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Qté Vente</th>
   <!--<th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Ord Vente</th>-->
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Réf</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Dernier</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Var %</th>
    <!--<th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Qté</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Capit</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >P.Haut</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >P.Bas</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >S.Haut</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >S.Bas</th>
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Heure</th>-->
    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-10" >Action</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let market of markets">
    <th class="align-middle text-center text-sm"> <button (click)="open(content,market.isin,market.referentiel.ticker)" ><span class="text-primary text-xs font-weight-bold">{{market.referentiel.stockName}}</span>
    </button></th>
   <!--<td>{{market.status}}</td>
    <td>{{market.limit.askOrd}}</td>-->
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.limit.askQty}}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.limit.ask | number : '1.2'}}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.limit.bid | number : '1.2'}}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.limit.bidQty}}</span></td>
   <!--<td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.limit.bidOrd}}</span></td>-->
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.close | number : '1.2'}}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.last | number : '1.2'}}</span></td>
    <td *ngIf="market.change<0"  class="align-middle text-center text-sm" ><span class="text-danger text-xs font-weight-bold">{{market.change}} %</span></td>
    <td *ngIf="market.change>0" class="align-middle text-center text-sm" ><span class="text-success text-xs font-weight-bold">{{market.change}} %</span></td>
    <td *ngIf="market.change==0" class="align-middle text-center text-sm" ><span class="text-secondary text-xs font-weight-bold">{{market.change}} %</span></td>
   <!-- <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.volume }}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.caps| number : '1.2'}}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.high}}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.low}}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.max}}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.min}}</span></td>
    <td class="align-middle text-center text-sm" ><span class="text-primary text-xs font-weight-bold">{{market.time}}</td>-->
    <td class="align-middle text-center text-sm" ><button class="badge badge-sm bg-gradient-success" (click)="openDialog(quantite,market.isin,market.referentiel.stockName,market.limit.bid,market.limit.bidQty,market.referentiel.ticker)" >Acheter</button></td>
  </tr>
  </tbody>
</table>
</div>
</div>

</div>
<ng-template #quantite let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title" style="color: #27346a">{{titre}}</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
  </div>
  <div  class="modal-body">
    <div class="container">
      <div *ngIf="!idPortfeuille"> Vous n'avez pas encore un portfeuille</div>
      <form  *ngIf="idPortfeuille" [formGroup]="quantiteForm" (ngSubmit)=" acheter()" novalidate>
        <div class="row">
            <div class="col-12">
                <div class="form-group">
                    <label class="text-custom-black fs-14 fw-600" >Nombre d'actions</label>
                    <input formControlName="qte" type="number" class="form-control form-control-custom" [(ngModel)]="nombre" [ngClass]="{ 'is-invalid': submitted && qte.errors }"
                        placeholder="Nombre d'action" >
                    <div *ngIf="submitted && qte.errors" class="invalid-feedback">
                      <div *ngIf="qte.errors.required">Le nombre d'actions est obligatoire</div>
                      <div *ngIf="qte.errors.min">Nombre d'action minimal est 1</div>
                      <div *ngIf="qte.errors.max">Nombre d'action trés grand</div>
                    </div>
                    <div>
                      Le nombre max d'actions que vous pouvez acheter est {{maxvalue}} 
                    </div>
                </div>
            </div>
          </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Ajouter</button>

              <button type="button" class="btn btn-outline-dark" (click)="d('Save click')">Fermer</button>
            </div>
      </form>
      <div *ngIf="!idPortfeuille" class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="d('Save click')">Fermer</button>
      </div>
      
    </div>
  </div>
  
</ng-template>

<app-footer></app-footer>



